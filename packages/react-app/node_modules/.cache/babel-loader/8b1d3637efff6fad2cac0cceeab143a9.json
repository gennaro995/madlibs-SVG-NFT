{"ast":null,"code":"var _jsxFileName = \"/Users/gennarogiordano/Desktop/dev.nosync/my-github/madlibs-SVG-NFT/packages/react-app/src/views/Loogies.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button, Card, List, Spin } from \"antd\";\nimport { Address } from \"../components\";\nimport { ethers } from \"ethers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Loogies({\n  readContracts,\n  mainnetProvider,\n  blockExplorer,\n  totalSupply,\n  DEBUG\n}) {\n  _s();\n\n  const [allLoogies, setAllLoogies] = useState();\n  const [page, setPage] = useState(1);\n  const [loadingLoogies, setLoadingLoogies] = useState(true);\n  const perPage = 8;\n  const [open, setOpen] = useState(false);\n\n  const toggleProposal = () => {\n    setOpen(!open);\n  };\n\n  useEffect(() => {\n    const updateAllLoogies = async () => {\n      if (readContracts.YourCollectible && totalSupply) {\n        setLoadingLoogies(true);\n        const collectibleUpdate = [];\n        let startIndex = totalSupply - 1 - perPage * (page - 1);\n\n        for (let tokenIndex = startIndex; tokenIndex > startIndex - perPage && tokenIndex >= 0; tokenIndex--) {\n          try {\n            if (DEBUG) console.log(\"Getting token index\", tokenIndex);\n            const tokenId = await readContracts.YourCollectible.tokenByIndex(tokenIndex);\n            if (DEBUG) console.log(\"Getting Loogie tokenId: \", tokenId);\n            const tokenURI = await readContracts.YourCollectible.tokenURI(tokenId);\n            if (DEBUG) console.log(\"tokenURI: \", tokenURI);\n            const jsonManifestString = atob(tokenURI.substring(29));\n\n            try {\n              const jsonManifest = JSON.parse(jsonManifestString);\n              collectibleUpdate.push({\n                id: tokenId,\n                uri: tokenURI,\n                ...jsonManifest\n              });\n            } catch (e) {\n              console.log(e);\n            }\n          } catch (e) {\n            console.log(e);\n          }\n        }\n\n        setAllLoogies(collectibleUpdate);\n        setLoadingLoogies(false);\n      }\n    };\n\n    updateAllLoogies();\n  }, [readContracts.YourCollectible, (totalSupply || \"0\").toString(), page]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"auto\",\n      margin: \"auto\",\n      paddingBottom: 25,\n      minHeight: 800\n    },\n    children: false ? /*#__PURE__*/_jsxDEV(Spin, {\n      style: {\n        marginTop: 100\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(List, {\n        grid: {\n          gutter: 16,\n          xs: 1,\n          sm: 2,\n          md: 2,\n          lg: 3,\n          xl: 4,\n          xxl: 4\n        },\n        pagination: {\n          total: totalSupply,\n          defaultPageSize: perPage,\n          defaultCurrent: page,\n          onChange: currentPage => {\n            setPage(currentPage);\n          },\n          showTotal: (total, range) => `${range[0]}-${range[1]} of ${totalSupply} items`\n        },\n        loading: loadingLoogies,\n        dataSource: allLoogies,\n        renderItem: item => {\n          const id = item.id.toNumber();\n          return /*#__PURE__*/_jsxDEV(List.Item, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              title: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: 18,\n                    marginRight: 8\n                  },\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 23\n              }, this),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.image,\n                alt: \"Loogie #\" + id,\n                width: \"200\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: item.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Address, {\n                  address: item.owner,\n                  ensProvider: mainnetProvider,\n                  blockExplorer: blockExplorer,\n                  fontSize: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"primary\",\n                    onClick: togglePopup,\n                    children: \"INSERT PROPOSAL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 98,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this)\n          }, id + \"_\" + item.uri + \"_\" + item.owner, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Loogies, \"wKnxo0MvHEWdL70XVqKvFBDGFx4=\");\n\n_c = Loogies;\nexport default Loogies;\n\nvar _c;\n\n$RefreshReg$(_c, \"Loogies\");","map":{"version":3,"sources":["/Users/gennarogiordano/Desktop/dev.nosync/my-github/madlibs-SVG-NFT/packages/react-app/src/views/Loogies.jsx"],"names":["React","useCallback","useEffect","useState","Link","Button","Card","List","Spin","Address","ethers","Loogies","readContracts","mainnetProvider","blockExplorer","totalSupply","DEBUG","allLoogies","setAllLoogies","page","setPage","loadingLoogies","setLoadingLoogies","perPage","open","setOpen","toggleProposal","updateAllLoogies","YourCollectible","collectibleUpdate","startIndex","tokenIndex","console","log","tokenId","tokenByIndex","tokenURI","jsonManifestString","atob","substring","jsonManifest","JSON","parse","push","id","uri","e","toString","width","margin","paddingBottom","minHeight","marginTop","gutter","xs","sm","md","lg","xl","xxl","total","defaultPageSize","defaultCurrent","onChange","currentPage","showTotal","range","item","toNumber","fontSize","marginRight","name","image","description","owner","togglePopup"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button, Card, List, Spin } from \"antd\";\nimport { Address } from \"../components\";\nimport { ethers } from \"ethers\";\n\nfunction Loogies({ readContracts, mainnetProvider, blockExplorer, totalSupply, DEBUG }) {\n  const [allLoogies, setAllLoogies] = useState();\n  const [page, setPage] = useState(1);\n  const [loadingLoogies, setLoadingLoogies] = useState(true);\n  const perPage = 8;\n  const [open, setOpen] = useState(false);\n  const toggleProposal = () => {\n    setOpen(!open);\n  }\n\n  useEffect(() => {\n    const updateAllLoogies = async () => {\n      if (readContracts.YourCollectible && totalSupply) {\n        setLoadingLoogies(true);\n        const collectibleUpdate = [];\n        let startIndex = totalSupply - 1 - perPage * (page - 1);\n        for (let tokenIndex = startIndex; tokenIndex > startIndex - perPage && tokenIndex >= 0; tokenIndex--) {\n          try {\n            if (DEBUG) console.log(\"Getting token index\", tokenIndex);\n            const tokenId = await readContracts.YourCollectible.tokenByIndex(tokenIndex);\n            if (DEBUG) console.log(\"Getting Loogie tokenId: \", tokenId);\n            const tokenURI = await readContracts.YourCollectible.tokenURI(tokenId);\n            if (DEBUG) console.log(\"tokenURI: \", tokenURI);\n            const jsonManifestString = atob(tokenURI.substring(29));\n\n            try {\n              const jsonManifest = JSON.parse(jsonManifestString);\n              collectibleUpdate.push({ id: tokenId, uri: tokenURI, ...jsonManifest });\n            } catch (e) {\n              console.log(e);\n            }\n          } catch (e) {\n            console.log(e);\n          }\n        }\n        setAllLoogies(collectibleUpdate);\n        setLoadingLoogies(false);\n      }\n    };\n    updateAllLoogies();\n  }, [readContracts.YourCollectible, (totalSupply || \"0\").toString(), page]);\n\n  return (\n    <div style={{ width: \"auto\", margin: \"auto\", paddingBottom: 25, minHeight: 800 }}>\n      {false ? (\n        <Spin style={{ marginTop: 100 }} />\n      ) : (\n        <div>\n          <List\n            grid={{\n              gutter: 16,\n              xs: 1,\n              sm: 2,\n              md: 2,\n              lg: 3,\n              xl: 4,\n              xxl: 4,\n            }}\n            pagination={{\n              total: totalSupply,\n              defaultPageSize: perPage,\n              defaultCurrent: page,\n              onChange: currentPage => {\n                setPage(currentPage);\n              },\n              showTotal: (total, range) => `${range[0]}-${range[1]} of ${totalSupply} items`,\n            }}\n            loading={loadingLoogies}\n            dataSource={allLoogies}\n            renderItem={item => {\n              const id = item.id.toNumber();\n\n              return (\n                <List.Item key={id + \"_\" + item.uri + \"_\" + item.owner}>\n                  <Card\n                    title={\n                      <div>\n                        <span style={{ fontSize: 18, marginRight: 8 }}>{item.name}</span>\n                      </div>\n                    }\n                  >\n                    <img src={item.image} alt={\"Loogie #\" + id} width=\"200\" />\n                    <div>{item.description}</div>\n                    <div>\n                      <Address\n                        address={item.owner}\n                        ensProvider={mainnetProvider}\n                        blockExplorer={blockExplorer}\n                        fontSize={16}\n                      />\n                      <div>\n                        <Button type=\"primary\" onClick={togglePopup}>\n                          INSERT PROPOSAL\n                        </Button>\n                      </div>\n                    </div>\n                  </Card>\n                </List.Item>\n              );\n            }}\n          />\n        </div>\n        \n      )}\n    </div>\n  );\n}\n\nexport default Loogies;\n"]},"metadata":{},"sourceType":"module"}