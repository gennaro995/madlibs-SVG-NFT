{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gennarogiordano/Desktop/Dev.nosync/speedrunethereum/optimistic-loogies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/gennarogiordano/Desktop/Dev.nosync/speedrunethereum/optimistic-loogies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/gennarogiordano/Desktop/Dev.nosync/speedrunethereum/optimistic-loogies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gennarogiordano/Desktop/Dev.nosync/speedrunethereum/optimistic-loogies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{Button,Card,List,Spin}from\"antd\";import{Address}from\"../components\";import{ethers}from\"ethers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Loogies(_ref){var readContracts=_ref.readContracts,mainnetProvider=_ref.mainnetProvider,blockExplorer=_ref.blockExplorer,totalSupply=_ref.totalSupply,DEBUG=_ref.DEBUG;var _useState=useState(),_useState2=_slicedToArray(_useState,2),allLoogies=_useState2[0],setAllLoogies=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loadingLoogies=_useState6[0],setLoadingLoogies=_useState6[1];var perPage=8;useEffect(function(){var updateAllLoogies=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var collectibleUpdate,startIndex,tokenIndex,tokenId,tokenURI,jsonManifestString,jsonManifest;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(readContracts.YourCollectible&&totalSupply)){_context.next=28;break;}setLoadingLoogies(true);collectibleUpdate=[];startIndex=totalSupply-1-perPage*(page-1);tokenIndex=startIndex;case 5:if(!(tokenIndex>startIndex-perPage&&tokenIndex>=0)){_context.next=26;break;}_context.prev=6;if(DEBUG)console.log(\"Getting token index\",tokenIndex);_context.next=10;return readContracts.YourCollectible.tokenByIndex(tokenIndex);case 10:tokenId=_context.sent;if(DEBUG)console.log(\"Getting Loogie tokenId: \",tokenId);_context.next=14;return readContracts.YourCollectible.tokenURI(tokenId);case 14:tokenURI=_context.sent;if(DEBUG)console.log(\"tokenURI: \",tokenURI);jsonManifestString=atob(tokenURI.substring(29));try{jsonManifest=JSON.parse(jsonManifestString);collectibleUpdate.push(_objectSpread({id:tokenId,uri:tokenURI},jsonManifest));}catch(e){console.log(e);}_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](6);console.log(_context.t0);case 23:tokenIndex--;_context.next=5;break;case 26:setAllLoogies(collectibleUpdate);setLoadingLoogies(false);case 28:case\"end\":return _context.stop();}}},_callee,null,[[6,20]]);}));return function updateAllLoogies(){return _ref2.apply(this,arguments);};}();updateAllLoogies();},[readContracts.YourCollectible,(totalSupply||\"0\").toString(),page]);return/*#__PURE__*/_jsx(\"div\",{style:{width:\"auto\",margin:\"auto\",paddingBottom:25,minHeight:800},children:false?/*#__PURE__*/_jsx(Spin,{style:{marginTop:100}}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(List,{grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:4,xxl:4},pagination:{total:totalSupply,defaultPageSize:perPage,defaultCurrent:page,onChange:function onChange(currentPage){setPage(currentPage);},showTotal:function showTotal(total,range){return\"\".concat(range[0],\"-\").concat(range[1],\" of \").concat(totalSupply,\" items\");}},loading:loadingLoogies,dataSource:allLoogies,renderItem:function renderItem(item){var id=item.id.toNumber();return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsxs(Card,{title:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18,marginRight:8},children:item.name})}),children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"Loogie #\"+id,width:\"200\"}),/*#__PURE__*/_jsx(\"div\",{children:item.description}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Address,{address:item.owner,ensProvider:mainnetProvider,blockExplorer:blockExplorer,fontSize:16})})]})},id+\"_\"+item.uri+\"_\"+item.owner);}})})});}export default Loogies;","map":{"version":3,"sources":["/Users/gennarogiordano/Desktop/Dev.nosync/speedrunethereum/optimistic-loogies-master/packages/react-app/src/views/Loogies.jsx"],"names":["React","useCallback","useEffect","useState","Link","Button","Card","List","Spin","Address","ethers","Loogies","readContracts","mainnetProvider","blockExplorer","totalSupply","DEBUG","allLoogies","setAllLoogies","page","setPage","loadingLoogies","setLoadingLoogies","perPage","updateAllLoogies","YourCollectible","collectibleUpdate","startIndex","tokenIndex","console","log","tokenByIndex","tokenId","tokenURI","jsonManifestString","atob","substring","jsonManifest","JSON","parse","push","id","uri","e","toString","width","margin","paddingBottom","minHeight","marginTop","gutter","xs","sm","md","lg","xl","xxl","total","defaultPageSize","defaultCurrent","onChange","currentPage","showTotal","range","item","toNumber","fontSize","marginRight","name","image","description","owner"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button, Card, List, Spin } from \"antd\";\nimport { Address } from \"../components\";\nimport { ethers } from \"ethers\";\n\nfunction Loogies({ readContracts, mainnetProvider, blockExplorer, totalSupply, DEBUG }) {\n  const [allLoogies, setAllLoogies] = useState();\n  const [page, setPage] = useState(1);\n  const [loadingLoogies, setLoadingLoogies] = useState(true);\n  const perPage = 8;\n\n  useEffect(() => {\n    const updateAllLoogies = async () => {\n      if (readContracts.YourCollectible && totalSupply) {\n        setLoadingLoogies(true);\n        const collectibleUpdate = [];\n        let startIndex = totalSupply - 1 - perPage * (page - 1);\n        for (let tokenIndex = startIndex; tokenIndex > startIndex - perPage && tokenIndex >= 0; tokenIndex--) {\n          try {\n            if (DEBUG) console.log(\"Getting token index\", tokenIndex);\n            const tokenId = await readContracts.YourCollectible.tokenByIndex(tokenIndex);\n            if (DEBUG) console.log(\"Getting Loogie tokenId: \", tokenId);\n            const tokenURI = await readContracts.YourCollectible.tokenURI(tokenId);\n            if (DEBUG) console.log(\"tokenURI: \", tokenURI);\n            const jsonManifestString = atob(tokenURI.substring(29));\n\n            try {\n              const jsonManifest = JSON.parse(jsonManifestString);\n              collectibleUpdate.push({ id: tokenId, uri: tokenURI, ...jsonManifest });\n            } catch (e) {\n              console.log(e);\n            }\n          } catch (e) {\n            console.log(e);\n          }\n        }\n        setAllLoogies(collectibleUpdate);\n        setLoadingLoogies(false);\n      }\n    };\n    updateAllLoogies();\n  }, [readContracts.YourCollectible, (totalSupply || \"0\").toString(), page]);\n\n  return (\n    <div style={{ width: \"auto\", margin: \"auto\", paddingBottom: 25, minHeight: 800 }}>\n      {false ? (\n        <Spin style={{ marginTop: 100 }} />\n      ) : (\n        <div>\n          <List\n            grid={{\n              gutter: 16,\n              xs: 1,\n              sm: 2,\n              md: 2,\n              lg: 3,\n              xl: 4,\n              xxl: 4,\n            }}\n            pagination={{\n              total: totalSupply,\n              defaultPageSize: perPage,\n              defaultCurrent: page,\n              onChange: currentPage => {\n                setPage(currentPage);\n              },\n              showTotal: (total, range) => `${range[0]}-${range[1]} of ${totalSupply} items`,\n            }}\n            loading={loadingLoogies}\n            dataSource={allLoogies}\n            renderItem={item => {\n              const id = item.id.toNumber();\n\n              return (\n                <List.Item key={id + \"_\" + item.uri + \"_\" + item.owner}>\n                  <Card\n                    title={\n                      <div>\n                        <span style={{ fontSize: 18, marginRight: 8 }}>{item.name}</span>\n                      </div>\n                    }\n                  >\n                    <img src={item.image} alt={\"Loogie #\" + id} width=\"200\" />\n                    <div>{item.description}</div>\n                    <div>\n                      <Address\n                        address={item.owner}\n                        ensProvider={mainnetProvider}\n                        blockExplorer={blockExplorer}\n                        fontSize={16}\n                      />\n                    </div>\n                  </Card>\n                </List.Item>\n              );\n            }}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Loogies;\n"]},"metadata":{},"sourceType":"module"}